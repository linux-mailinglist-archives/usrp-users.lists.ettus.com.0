Return-Path: <usrp-users-bounces@lists.ettus.com>
X-Original-To: lists+usrp-users@lfdr.de
Delivered-To: lists+usrp-users@lfdr.de
Received: from mm2.emwd.com (mm2.emwd.com [172.104.30.75])
	by mail.lfdr.de (Postfix) with ESMTPS id 3F91C1B63E1
	for <lists+usrp-users@lfdr.de>; Thu, 23 Apr 2020 20:36:46 +0200 (CEST)
Received: from [::1] (port=51256 helo=mm2.emwd.com)
	by mm2.emwd.com with esmtp (Exim 4.93)
	(envelope-from <usrp-users-bounces@lists.ettus.com>)
	id 1jRgiI-0004VY-9x; Thu, 23 Apr 2020 14:36:42 -0400
Received: from mail-ot1-f44.google.com ([209.85.210.44]:44900)
 by mm2.emwd.com with esmtps (TLS1.2) tls TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
 (Exim 4.93) (envelope-from <rkossler@nd.edu>) id 1jRgiE-0004Rt-Lu
 for usrp-users@lists.ettus.com; Thu, 23 Apr 2020 14:36:38 -0400
Received: by mail-ot1-f44.google.com with SMTP id j4so7836385otr.11
 for <usrp-users@lists.ettus.com>; Thu, 23 Apr 2020 11:36:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=nd.edu; s=google;
 h=mime-version:from:date:message-id:subject:to;
 bh=gHU4MqMFg2DRddCypkaDxvM79QL48trSRXELGsZzMLo=;
 b=PKBl/WMKq9pNLFGd5pYZMnYcScCMmXLruIfhXtmRhs+X5y8TcN+ugNHJcGmdvjRSbP
 mB1J/iSj/MiUdzGHHQpGFSR8GN4M+E1imrkha6w84MVBuDik9HOIvlO1DjOfswWAbS4g
 PK+x1wKgjIKdD5szWPleQtQy3iCLSZNtQ4AF82N2jw/Cna0QPniPLL2YDowHSUTrIVX3
 yMJtrECdJyK3oHvEy0198QDLLW+zTJs2gOufyf6CCAWtgcueRq4CWtJqeac4N2WldeJb
 277UsD9VJY8QVg0ba45lEdS0PCS+uuvqda5Zw0CGYg8fRWZD1LJI8W+3XZPorINhwFsq
 FLOQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:from:date:message-id:subject:to;
 bh=gHU4MqMFg2DRddCypkaDxvM79QL48trSRXELGsZzMLo=;
 b=kbwJFOQz6ZE/3llAvTgXst5YYvkvTBZkSDFa8pCAe4h6r/PWyOowPa6ftRojQREs7z
 XYDgmebRSEbzyQjPXAHFLtu8cKO1Ynu/BQHDbNgkO6kI02wSWT6dUDK1A6w5HkHm6gLV
 zF5tneZUOici5cmbg358QrMz6H4BaQ3RnjTBozjqND4A4B63nV67+Hoyd/EPj6eoTx0h
 1HtVOnXsGixVM3HPy6dmzZdSLrPvz+UMZt4BuPwaYwv15y2QzFhZUMohWA6DBlkKDXMm
 j7ZvywMeDeHr0YCIxlP1DJ6aZBLUtI6ybRMhDD4PFeM/egmn0U2cmSSYxqFv/yxunwGD
 n4Uw==
X-Gm-Message-State: AGi0PuYnPKV6akbwezNzCakRNq20sZCQKs/XUZCV220ltUuGMm7Yxf+i
 ktJ1qErQCsG7yvSYYMR8dmWB4DgjZ5y2aNVNXm2I+NtV8To=
X-Google-Smtp-Source: APiQypLPa4KBxN8unWTsd/v9MAupFI6WgOnmvjDrGOlMxGuB15HBH5ONPChS1z11qM0J9TaNf3NnPOH6+6MixGHrWq4=
X-Received: by 2002:aca:f288:: with SMTP id q130mr4133674oih.33.1587666957504; 
 Thu, 23 Apr 2020 11:35:57 -0700 (PDT)
MIME-Version: 1.0
Date: Thu, 23 Apr 2020 14:35:46 -0400
Message-ID: <CAB__hTRkiAjJ4H7ehSMHfjsO3NDLpghzjJpnZMZw6-MTVYp8hw@mail.gmail.com>
To: usrp-users <usrp-users@lists.ettus.com>
Content-Type: multipart/mixed; boundary="000000000000069de705a3f985a0"
Subject: [USRP-users] using 'replay' block with 'duc'
X-BeenThere: usrp-users@lists.ettus.com
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: USRP-related discussion and support <usrp-users.lists.ettus.com>
List-Unsubscribe: <http://lists.ettus.com/mailman/options/usrp-users_lists.ettus.com>, 
 <mailto:usrp-users-request@lists.ettus.com?subject=unsubscribe>
List-Archive: <http://lists.ettus.com/pipermail/usrp-users_lists.ettus.com/>
List-Post: <mailto:usrp-users@lists.ettus.com>
List-Help: <mailto:usrp-users-request@lists.ettus.com?subject=help>
List-Subscribe: <http://lists.ettus.com/mailman/listinfo/usrp-users_lists.ettus.com>, 
 <mailto:usrp-users-request@lists.ettus.com?subject=subscribe>
From: Rob Kossler via USRP-users <usrp-users@lists.ettus.com>
Reply-To: Rob Kossler <rkossler@nd.edu>
Errors-To: usrp-users-bounces@lists.ettus.com
Sender: "USRP-users" <usrp-users-bounces@lists.ettus.com>
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - mm2.emwd.com
X-AntiAbuse: Original Domain - lfdr.de
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - lists.ettus.com
X-Get-Message-Sender-Via: mm2.emwd.com: acl_c_authenticated_local_user: mailman/mailman
X-Authenticated-Sender: mm2.emwd.com: mailman@lists.ettus.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 

--000000000000069de705a3f985a0
Content-Type: multipart/alternative; boundary="000000000000069de305a3f9859e"

--000000000000069de305a3f9859e
Content-Type: text/plain; charset="UTF-8"

Hi,
I am having an issue with UHD 3.15.LTS using the replay block.  When I play
out my previously stored samples the first time, everything works fine.
But after stopping the first time, if I try to start playing out again, I
get a whole bunch of 'Lates' and no RF output.

In order to duplicate the problem with an Ettus example, I modified
'replay_samples_from_file' to add a loop and command prompt so that the
user could hit <enter> to start playing out while still using <ctrl-c> to
stop.  Unfortunately for me, this worked fine and did not show the problem.

Next, I further modified the example to place a DUC block in between the
Replay block and the Radio.  Now it duplicates the issue perfectly
(modified example attached).

So, perhaps I need to clear the DUC in some way when stopping the
streaming??  But if so, I'm not really sure how to do so.

Thanks.
Rob

--000000000000069de305a3f9859e
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hi,<br><div>I am having an issue with UHD 3.15.LTS using t=
he replay block.=C2=A0 When I play out my previously stored samples the fir=
st time, everything works fine.=C2=A0 But after stopping the first time, if=
 I try to start playing out again, I get a whole bunch of &#39;Lates&#39; a=
nd no RF output.</div><div><br></div><div>In order to duplicate the problem=
 with an Ettus example, I modified &#39;replay_samples_from_file&#39; to ad=
d a loop and command prompt so that the user could hit &lt;enter&gt; to sta=
rt playing out while still using &lt;ctrl-c&gt; to stop.=C2=A0 Unfortunatel=
y for me, this worked fine and did not show the problem.</div><div><br></di=
v><div>Next, I further modified=C2=A0the example to place a DUC block in be=
tween the Replay block and the Radio.=C2=A0 Now it duplicates the issue per=
fectly (modified example attached).</div><div><br></div><div>So, perhaps I =
need to clear the DUC in some way when stopping the streaming??=C2=A0 But i=
f so, I&#39;m not really sure how to do so.</div><div><br></div><div>Thanks=
.</div><div>Rob</div></div>

--000000000000069de305a3f9859e--
--000000000000069de705a3f985a0
Content-Type: text/x-c++src; charset="US-ASCII"; name="replay_samples_from_file.cpp"
Content-Disposition: attachment; filename="replay_samples_from_file.cpp"
Content-Transfer-Encoding: base64
Content-ID: <f_k9d3s3ul0>
X-Attachment-Id: f_k9d3s3ul0

Ly8KLy8gQ29weXJpZ2h0IDIwMTggRXR0dXMgUmVzZWFyY2gsIEEgTmF0aW9uYWwgSW5zdHJ1bWVu
dHMgQ29tcGFueQovLwovLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTMuMC1vci1sYXRl
cgovLwovLwovLyBEZXNjcmlwdGlvbjoKLy8KLy8gVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyB1
c2luZyB0aGUgUmVwbGF5IGJsb2NrIHRvIHJlcGxheSBkYXRhIGZyb20gYSBmaWxlLgovLyBJdCBz
dHJlYW1zIHRoZSBmaWxlIGRhdGEgdG8gdGhlIFJlcGxheSBibG9jaywgd2hlcmUgaXQgaXMgcmVj
b3JkZWQsIHRoZW4gaXQKLy8gaXMgcGxheWVkIGJhY2sgdG8gdGhlIHJhZGlvLgoKI2luY2x1ZGUg
PHVoZC9kZXZpY2UzLmhwcD4KI2luY2x1ZGUgPHVoZC9yZm5vYy9yYWRpb19jdHJsLmhwcD4KI2lu
Y2x1ZGUgPHVoZC9yZm5vYy9yZXBsYXlfYmxvY2tfY3RybC5ocHA+CiNpbmNsdWRlIDx1aGQvdXRp
bHMvc2FmZV9tYWluLmhwcD4KI2luY2x1ZGUgPGJvb3N0L2Zvcm1hdC5ocHA+CiNpbmNsdWRlIDxi
b29zdC9wcm9ncmFtX29wdGlvbnMuaHBwPgojaW5jbHVkZSA8Y3NpZ25hbD4KI2luY2x1ZGUgPGZz
dHJlYW0+CiNpbmNsdWRlIDx0aHJlYWQ+CgoKbmFtZXNwYWNlIHBvID0gYm9vc3Q6OnByb2dyYW1f
b3B0aW9uczsKCnVzaW5nIHN0ZDo6Y291dDsKdXNpbmcgc3RkOjplbmRsOwoKCi8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8KCnN0YXRpYyB2b2xhdGlsZSBib29sIHN0b3Bfc2lnbmFsX2NhbGxlZCA9IGZh
bHNlOwoKLy8gQ3RybCtDIGhhbmRsZXIKdm9pZCBzaWdfaW50X2hhbmRsZXIoaW50KQp7CiAgICBz
dG9wX3NpZ25hbF9jYWxsZWQgPSB0cnVlOwp9CgoKaW50IFVIRF9TQUZFX01BSU4oaW50IGFyZ2Ms
IGNoYXIqIGFyZ3ZbXSkKewogICAgLy8gV2UgdXNlIHNjMTYgaW4gdGhpcyBleGFtcGxlLCBidXQg
dGhlIHJlcGxheSBibG9jayBvbmx5IHVzZXMgNjQtYml0IHdvcmRzCiAgICAvLyBhbmQgaXMgbm90
IGF3YXJlIG9mIHRoZSBDUFUgb3Igd2lyZSBmb3JtYXQuCiAgICBzdGQ6OnN0cmluZyB3aXJlX2Zv
cm1hdCgic2MxNiIpOwogICAgc3RkOjpzdHJpbmcgY3B1X2Zvcm1hdCgic2MxNiIpOwoKICAgIC8v
IENvbnN0YW50cyByZWxhdGVkIHRvIHRoZSBSZXBsYXkgYmxvY2sKICAgIGNvbnN0IHNpemVfdCBy
ZXBsYXlfd29yZF9zaXplID0gODsgLy8gU2l6ZSBvZiB3b3JkcyB1c2VkIGJ5IHJlcGxheSBibG9j
awogICAgY29uc3Qgc2l6ZV90IGJ5dGVzX3Blcl9zYW1wbGUgPSA0OyAvLyBDb21wbGV4IHNpZ25l
ZCAxNi1iaXQgaXMgMzIgYml0cyBwZXIgc2FtcGxlCiAgICBjb25zdCBzaXplX3Qgc2FtcGxlc19w
ZXJfd29yZCA9IDI7IC8vIE51bWJlciBvZiBzYzE2IHNhbXBsZXMgcGVyIHdvcmQKICAgIGNvbnN0
IHNpemVfdCByZXBsYXlfc3BwID0gMjAwMDsgLy8gU0MxNiBTYW1wbGVzIHBlciBwYWNrZXQgZ2Vu
ZXJhdGVkIGJ5IFJlcGxheSBibG9jawoKCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIEhh
bmRsZSBjb21tYW5kIGxpbmUgb3B0aW9ucwoKICAgIHN0ZDo6c3RyaW5nIGFyZ3MsIHJhZGlvX2Fy
Z3MsIGZpbGUsIGFudCwgcmVmOwogICAgZG91YmxlIHJhdGUsIGZyZXEsIGdhaW4sIGJ3LCBzZWNv
bmRzX2luX2Z1dHVyZTsKICAgIHNpemVfdCByYWRpb19pZCwgcmFkaW9fY2hhbiwgcmVwbGF5X2lk
LCByZXBsYXlfY2hhbiwgbnNhbXBzOwoKICAgIHBvOjpvcHRpb25zX2Rlc2NyaXB0aW9uIGRlc2Mo
IkFsbG93ZWQgT3B0aW9ucyIpOwogICAgLy8gY2xhbmctZm9ybWF0IG9mZgogICAgZGVzYy5hZGRf
b3B0aW9ucygpCiAgICAgICAgKCJoZWxwIiwgImhlbHAgbWVzc2FnZSIpCiAgICAgICAgKCJhcmdz
IiwgcG86OnZhbHVlPHN0ZDo6c3RyaW5nPigmYXJncyktPmRlZmF1bHRfdmFsdWUoIiIpLCAibXVs
dGkgdWhkIGRldmljZSBhZGRyZXNzIGFyZ3MiKQogICAgICAgICgicmFkaW8taWQiLCBwbzo6dmFs
dWU8c2l6ZV90PigmcmFkaW9faWQpLT5kZWZhdWx0X3ZhbHVlKDApLCAicmFkaW8gYmxvY2sgdG8g
dXNlIChlLmcuLCAwIG9yIDEpLiIpCiAgICAgICAgKCJyYWRpby1jaGFuIiwgcG86OnZhbHVlPHNp
emVfdD4oJnJhZGlvX2NoYW4pLT5kZWZhdWx0X3ZhbHVlKDApLCAicmFkaW8gY2hhbm5lbCB0byB1
c2UiKQogICAgICAgICgicmFkaW8tYXJncyIsIHBvOjp2YWx1ZTxzdGQ6OnN0cmluZz4oJnJhZGlv
X2FyZ3MpLCAicmFkaW8gYXJndW1lbnRzIikKICAgICAgICAoInJlcGxheS1pZCIsIHBvOjp2YWx1
ZTxzaXplX3Q+KCZyZXBsYXlfaWQpLT5kZWZhdWx0X3ZhbHVlKDApLCAicmVwbGF5IGJsb2NrIHRv
IHVzZSAoZS5nLiwgMCBvciAxKSIpCiAgICAgICAgKCJyZXBsYXlfY2hhbiIsIHBvOjp2YWx1ZTxz
aXplX3Q+KCZyZXBsYXlfY2hhbiktPmRlZmF1bHRfdmFsdWUoMCksICJyZXBsYXkgY2hhbm5lbCB0
byB1c2UiKQogICAgICAgICgibnNhbXBzIiwgcG86OnZhbHVlPHNpemVfdD4oJm5zYW1wcyktPmRl
ZmF1bHRfdmFsdWUoMCksICJudW1iZXIgb2Ygc2FtcGxlcyB0byBwbGF5ICgwIGZvciBpbmZpbml0
ZSkiKQogICAgICAgICgiZmlsZSIsIHBvOjp2YWx1ZTxzdGQ6OnN0cmluZz4oJmZpbGUpLT5kZWZh
dWx0X3ZhbHVlKCJ1c3JwX3NhbXBsZXMuZGF0IiksICJuYW1lIG9mIHRoZSBmaWxlIHRvIHJlYWQg
YmluYXJ5IHNhbXBsZXMgZnJvbSIpCiAgICAgICAgKCJmcmVxIiwgcG86OnZhbHVlPGRvdWJsZT4o
JmZyZXEpLCAiUkYgY2VudGVyIGZyZXF1ZW5jeSBpbiBIeiIpCiAgICAgICAgKCJyYXRlIiwgcG86
OnZhbHVlPGRvdWJsZT4oJnJhdGUpLCAicmF0ZSBvZiByYWRpbyBibG9jayIpCiAgICAgICAgKCJn
YWluIiwgcG86OnZhbHVlPGRvdWJsZT4oJmdhaW4pLCAiZ2FpbiBmb3IgdGhlIFJGIGNoYWluIikK
ICAgICAgICAoImFudCIsIHBvOjp2YWx1ZTxzdGQ6OnN0cmluZz4oJmFudCksICJhbnRlbm5hIHNl
bGVjdGlvbiIpCiAgICAgICAgKCJidyIsIHBvOjp2YWx1ZTxkb3VibGU+KCZidyksICJhbmFsb2cg
ZnJvbnQtZW5kIGZpbHRlciBiYW5kd2lkdGggaW4gSHoiKQogICAgICAgICgicmVmIiwgcG86OnZh
bHVlPHN0ZDo6c3RyaW5nPigmcmVmKS0+ZGVmYXVsdF92YWx1ZSgiaW50ZXJuYWwiKSwgInJlZmVy
ZW5jZSBzb3VyY2UgKGludGVybmFsLCBleHRlcm5hbCwgbWltbykiKQogICAgICAgICgic2VjcyIs
IHBvOjp2YWx1ZTxkb3VibGU+KCZzZWNvbmRzX2luX2Z1dHVyZSktPmRlZmF1bHRfdmFsdWUoMS41
KSwgIm51bWJlciBvZiBzZWNvbmRzIGluIHRoZSBmdXR1cmUgdG8gc3RhcnQgcmVwbGF5IikKICAg
IDsKICAgIC8vIGNsYW5nLWZvcm1hdCBvbgogICAgcG86OnZhcmlhYmxlc19tYXAgdm07CiAgICBw
bzo6c3RvcmUocG86OnBhcnNlX2NvbW1hbmRfbGluZShhcmdjLCBhcmd2LCBkZXNjKSwgdm0pOwog
ICAgcG86Om5vdGlmeSh2bSk7CgogICAgLy8gUHJpbnQgaGVscCBtZXNzYWdlCiAgICBpZiAodm0u
Y291bnQoImhlbHAiKSkgewogICAgICAgIGNvdXQgPDwgYm9vc3Q6OmZvcm1hdCgiVUhEL1JGTm9D
IFJlcGxheSBzYW1wbGVzIGZyb20gZmlsZSAlcyIpICUgZGVzYyA8PCBlbmRsOwogICAgICAgIGNv
dXQgPDwgIlRoaXMgYXBwbGljYXRpb24gdXNlcyB0aGUgUmVwbGF5IGJsb2NrIHRvIHBsYXliYWNr
IGRhdGEgZnJvbSBhIGZpbGUgdG8gIgogICAgICAgICAgICAgICAgImEgcmFkaW8iCiAgICAgICAg
ICAgICA8PCBlbmRsCiAgICAgICAgICAgICA8PCBlbmRsOwogICAgICAgIHJldHVybiBFWElUX0ZB
SUxVUkU7CiAgICB9CgoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gQ3JlYXRlIFVTUlAg
ZGV2aWNlIGFuZCBibG9jayBjb250cm9scwoKICAgIGNvdXQgPDwgIkNyZWF0aW5nIHRoZSBVU1JQ
IGRldmljZSB3aXRoOiAiIDw8IGFyZ3MgPDwgIi4gLiAuXG4iIDw8IGVuZGw7CiAgICB1aGQ6OmRl
dmljZTM6OnNwdHIgdXNycCA9IHVoZDo6ZGV2aWNlMzo6bWFrZShhcmdzKTsKCiAgICAvLyBDcmVh
dGUgaGFuZGxlIGZvciByYWRpbyBvYmplY3QKICAgIHVoZDo6cmZub2M6OmJsb2NrX2lkX3QgcmFk
aW9fY3RybF9pZCgwLCAiUmFkaW8iLCByYWRpb19pZCk7CiAgICB1aGQ6OnJmbm9jOjpyYWRpb19j
dHJsOjpzcHRyIHJhZGlvX2N0cmw7CiAgICByYWRpb19jdHJsID0gdXNycC0+Z2V0X2Jsb2NrX2N0
cmw8dWhkOjpyZm5vYzo6cmFkaW9fY3RybD4ocmFkaW9fY3RybF9pZCk7CiAgICBzdGQ6OmNvdXQg
PDwgIlVzaW5nIHJhZGlvICIgPDwgcmFkaW9faWQgPDwgIiwgY2hhbm5lbCAiIDw8IHJhZGlvX2No
YW4gPDwgc3RkOjplbmRsOwoKICAgIC8vIENyZWF0ZSBoYW5kbGUgZm9yIGRkYyBvYmplY3QKICAg
IHVoZDo6cmZub2M6OmJsb2NrX2lkX3QgZHVjX2N0cmxfaWQoMCwgIkRVQyIsIHJhZGlvX2lkKTsK
ICAgIHVoZDo6cmZub2M6OmJsb2NrX2N0cmxfYmFzZTo6c3B0ciBkdWNfY3RybDsKICAgIGlmICgh
dXNycC0+aGFzX2Jsb2NrKGR1Y19jdHJsX2lkKSkgewogICAgICAgIGNvdXQgPDwgIlVuYWJsZSB0
byBmaW5kIGJsb2NrIFwiIiA8PCBkdWNfY3RybF9pZCA8PCAiXCIiIDw8IGVuZGw7CiAgICAgICAg
cmV0dXJuIEVYSVRfRkFJTFVSRTsKICAgIH0KICAgIGR1Y19jdHJsID0gdXNycC0+Z2V0X2Jsb2Nr
X2N0cmwoZHVjX2N0cmxfaWQpOwogICAgc3RkOjpjb3V0IDw8ICJVc2luZyBkdWMgIiA8PCByYWRp
b19pZCA8PCAiLCBjaGFubmVsICIgPDwgcmFkaW9fY2hhbiA8PCBzdGQ6OmVuZGw7CgogICAgLy8g
Q2hlY2sgaWYgdGhlIHJlcGxheSBibG9jayBleGlzdHMgb24gdGhpcyBkZXZpY2UKICAgIHVoZDo6
cmZub2M6OmJsb2NrX2lkX3QgcmVwbGF5X2N0cmxfaWQoMCwgIlJlcGxheSIsIHJlcGxheV9pZCk7
CiAgICB1aGQ6OnJmbm9jOjpyZXBsYXlfYmxvY2tfY3RybDo6c3B0ciByZXBsYXlfY3RybDsKICAg
IGlmICghdXNycC0+aGFzX2Jsb2NrKHJlcGxheV9jdHJsX2lkKSkgewogICAgICAgIGNvdXQgPDwg
IlVuYWJsZSB0byBmaW5kIGJsb2NrIFwiIiA8PCByZXBsYXlfY3RybF9pZCA8PCAiXCIiIDw8IGVu
ZGw7CiAgICAgICAgcmV0dXJuIEVYSVRfRkFJTFVSRTsKICAgIH0KICAgIHJlcGxheV9jdHJsID0g
dXNycC0+Z2V0X2Jsb2NrX2N0cmw8dWhkOjpyZm5vYzo6cmVwbGF5X2Jsb2NrX2N0cmw+KHJlcGxh
eV9jdHJsX2lkKTsKICAgIHN0ZDo6Y291dCA8PCAiVXNpbmcgcmVwbGF5IGJsb2NrICIgPDwgcmVw
bGF5X2lkIDw8ICIsIGNoYW5uZWwgIiA8PCByZXBsYXlfY2hhbgogICAgICAgICAgICAgIDw8IHN0
ZDo6ZW5kbDsKCgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBDb25maWd1cmUgcmFkaW8K
CiAgICAvLyBMb2NrIGNsb2NrcwogICAgaWYgKHZtLmNvdW50KCJyZWYiKSkgewogICAgICAgIHJh
ZGlvX2N0cmwtPnNldF9jbG9ja19zb3VyY2UocmVmKTsKICAgIH0KICAgIAogICAgLy8gQXBwbHkg
YW55IHJhZGlvIGFyZ3VtZW50cyBwcm92aWRlZAogICAgcmFkaW9fY3RybC0+c2V0X2FyZ3MocmFk
aW9fYXJncyk7CgogICAgLy8gU2V0IHRoZSBjZW50ZXIgZnJlcXVlbmN5CiAgICBpZiAobm90IHZt
LmNvdW50KCJmcmVxIikpIHsKICAgICAgICBzdGQ6OmNlcnIgPDwgIlBsZWFzZSBzcGVjaWZ5IHRo
ZSBjZW50ZXIgZnJlcXVlbmN5IHdpdGggLS1mcmVxIiA8PCBzdGQ6OmVuZGw7CiAgICAgICAgcmV0
dXJuIEVYSVRfRkFJTFVSRTsKICAgIH0KICAgIHN0ZDo6Y291dCA8PCBib29zdDo6Zm9ybWF0KCJT
ZXR0aW5nIFRYIEZyZXE6ICVmIE1Iei4uLiIpICUgKGZyZXEgLyAxZTYpIDw8IHN0ZDo6ZW5kbDsK
ICAgIHJhZGlvX2N0cmwtPnNldF90eF9mcmVxdWVuY3koZnJlcSwgcmFkaW9fY2hhbik7CiAgICBz
dGQ6OmNvdXQgPDwgYm9vc3Q6OmZvcm1hdCgiQWN0dWFsIFRYIEZyZXE6ICVmIE1Iei4uLiIpCiAg
ICAgICAgICAgICAgICAgICAgICUgKHJhZGlvX2N0cmwtPmdldF90eF9mcmVxdWVuY3kocmFkaW9f
Y2hhbikgLyAxZTYpCiAgICAgICAgICAgICAgPDwgc3RkOjplbmRsCiAgICAgICAgICAgICAgPDwg
c3RkOjplbmRsOwoKICAgIC8vIFNldCB0aGUgc2FtcGxlIHJhdGUKICAgIGlmICh2bS5jb3VudCgi
cmF0ZSIpKSB7CiAgICAgICAgc3RkOjpjb3V0IDw8IGJvb3N0Ojpmb3JtYXQoIlNldHRpbmcgVFgg
UmF0ZTogJWYgTXNwcy4uLiIpICUgKHJhdGUgLyAxZTYpCiAgICAgICAgICAgICAgICAgIDw8IHN0
ZDo6ZW5kbDsKCQlkdWNfY3RybC0+c2V0X2FyZzxkb3VibGU+KCJvdXRwdXRfcmF0ZSIscmFkaW9f
Y3RybC0+Z2V0X3JhdGUoKSk7CgkJZHVjX2N0cmwtPnNldF9hcmc8ZG91YmxlPigiaW5wdXRfcmF0
ZSIscmF0ZSk7CiAgICAgICAgLy9yYWRpb19jdHJsLT5zZXRfcmF0ZShyYXRlKTsKICAgICAgICBz
dGQ6OmNvdXQgPDwgYm9vc3Q6OmZvcm1hdCgiQWN0dWFsIFRYIFJhdGU6ICVmIE1zcHMuLi4iKQog
ICAgICAgICAgICAgICAgICAgICAgICAgJSAocmFkaW9fY3RybC0+Z2V0X3JhdGUoKSAvIDFlNikK
ICAgICAgICAgICAgICAgICAgPDwgc3RkOjplbmRsCiAgICAgICAgICAgICAgICAgIDw8IHN0ZDo6
ZW5kbDsKICAgIH0KCiAgICAvLyBTZXQgdGhlIFJGIGdhaW4KICAgIGlmICh2bS5jb3VudCgiZ2Fp
biIpKSB7CiAgICAgICAgc3RkOjpjb3V0IDw8IGJvb3N0Ojpmb3JtYXQoIlNldHRpbmcgVFggR2Fp
bjogJWYgZEIuLi4iKSAlIGdhaW4gPDwgc3RkOjplbmRsOwogICAgICAgIHJhZGlvX2N0cmwtPnNl
dF90eF9nYWluKGdhaW4sIHJhZGlvX2NoYW4pOwogICAgICAgIHN0ZDo6Y291dCA8PCBib29zdDo6
Zm9ybWF0KCJBY3R1YWwgVFggR2FpbjogJWYgZEIuLi4iKQogICAgICAgICAgICAgICAgICAgICAg
ICAgJSByYWRpb19jdHJsLT5nZXRfdHhfZ2FpbihyYWRpb19jaGFuKQogICAgICAgICAgICAgICAg
ICA8PCBzdGQ6OmVuZGwKICAgICAgICAgICAgICAgICAgPDwgc3RkOjplbmRsOwogICAgfQoKICAg
IC8vIFNldCB0aGUgYW5hbG9nIGZyb250LWVuZCBmaWx0ZXIgYmFuZHdpZHRoCiAgICBpZiAodm0u
Y291bnQoImJ3IikpIHsKICAgICAgICBzdGQ6OmNvdXQgPDwgYm9vc3Q6OmZvcm1hdCgiU2V0dGlu
ZyBUWCBCYW5kd2lkdGg6ICVmIE1Iei4uLiIpICUgKGJ3IC8gMWU2KQogICAgICAgICAgICAgICAg
ICA8PCBzdGQ6OmVuZGw7CiAgICAgICAgcmFkaW9fY3RybC0+c2V0X3R4X2JhbmR3aWR0aChidywg
cmFkaW9fY2hhbik7CiAgICAgICAgc3RkOjpjb3V0IDw8IGJvb3N0Ojpmb3JtYXQoIkFjdHVhbCBU
WCBCYW5kd2lkdGg6ICVmIE1Iei4uLiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAlIChyYWRp
b19jdHJsLT5nZXRfdHhfYmFuZHdpZHRoKHJhZGlvX2NoYW4pIC8gMWU2KQogICAgICAgICAgICAg
ICAgICA8PCBzdGQ6OmVuZGwKICAgICAgICAgICAgICAgICAgPDwgc3RkOjplbmRsOwogICAgfQoK
ICAgIC8vIFNldCB0aGUgYW50ZW5uYQogICAgaWYgKHZtLmNvdW50KCJhbnQiKSkgewogICAgICAg
IHJhZGlvX2N0cmwtPnNldF90eF9hbnRlbm5hKGFudCwgcmFkaW9fY2hhbik7CiAgICB9CgogICAg
Ly8gQWxsb3cgZm9yIHNvbWUgc2V0dXAgdGltZQogICAgc3RkOjp0aGlzX3RocmVhZDo6c2xlZXBf
Zm9yKHN0ZDo6Y2hyb25vOjptaWxsaXNlY29uZHMoMTAwMCkpOwoKCiAgICAvLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8KICAgIC8vIENvbm5lY3QgUmVwbGF5IGJsb2NrIHRvIHJhZGlvCgogICAgdWhkOjpyZm5v
Yzo6Z3JhcGg6OnNwdHIgcmVwbGF5X2dyYXBoID0gdXNycC0+Y3JlYXRlX2dyYXBoKCJyZm5vY19y
ZXBsYXkiKTsKICAgIHVzcnAtPmNsZWFyKCk7CiAgICBzdGQ6OmNvdXQgPDwgIkNvbm5lY3Rpbmcg
IiA8PCByZXBsYXlfY3RybC0+Z2V0X2Jsb2NrX2lkKCkgPDwgIiA9PT4gIgogICAgICAgICAgICAg
IDw8IHJhZGlvX2N0cmwtPmdldF9ibG9ja19pZCgpIDw8IHN0ZDo6ZW5kbDsKICAgIHJlcGxheV9n
cmFwaC0+Y29ubmVjdChyZXBsYXlfY3RybC0+Z2V0X2Jsb2NrX2lkKCksCiAgICAgICAgcmVwbGF5
X2NoYW4sCiAgICAgICAgZHVjX2N0cmwtPmdldF9ibG9ja19pZCgpLAogICAgICAgIHJhZGlvX2No
YW4sCiAgICAgICAgcmVwbGF5X3NwcCk7CgogICAgc3RkOjpjb3V0IDw8ICJDb25uZWN0aW5nICIg
PDwgcmVwbGF5X2N0cmwtPmdldF9ibG9ja19pZCgpIDw8ICIgPT0+ICIKICAgICAgICAgICAgICA8
PCByYWRpb19jdHJsLT5nZXRfYmxvY2tfaWQoKSA8PCBzdGQ6OmVuZGw7CiAgICByZXBsYXlfZ3Jh
cGgtPmNvbm5lY3QoZHVjX2N0cmwtPmdldF9ibG9ja19pZCgpLAogICAgICAgIHJhZGlvX2NoYW4s
CiAgICAgICAgcmFkaW9fY3RybC0+Z2V0X2Jsb2NrX2lkKCksCiAgICAgICAgcmFkaW9fY2hhbiwK
ICAgICAgICByZXBsYXlfc3BwKTsKCiAgICAvLyBJbmZvcm0gcmVwbGF5IGJsb2NrIHRoYXQgaXQg
aGFzIGFuIFJYIHN0cmVhbWVyIGNvbm5lY3RlZCB0byBpdAogICAgcmVwbGF5X2N0cmwtPnNldF9y
eF9zdHJlYW1lcih0cnVlLCByZXBsYXlfY2hhbik7CgoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwog
ICAgLy8gU2V0dXAgc3RyZWFtZXIgdG8gUmVwbGF5IGJsb2NrCgogICAgdWhkOjpkZXZpY2VfYWRk
cl90IHN0cmVhbWVyX2FyZ3M7CiAgICB1aGQ6OnN0cmVhbV9hcmdzX3Qgc3RyZWFtX2FyZ3MoY3B1
X2Zvcm1hdCwgd2lyZV9mb3JtYXQpOwogICAgdWhkOjp0eF9zdHJlYW1lcjo6c3B0ciB0eF9zdHJl
YW07CiAgICB1aGQ6OnR4X21ldGFkYXRhX3QgdHhfbWQ7CgogICAgc3RyZWFtZXJfYXJnc1siYmxv
Y2tfaWQiXSAgID0gcmVwbGF5X2N0cmwtPmdldF9ibG9ja19pZCgpLnRvX3N0cmluZygpOwogICAg
c3RyZWFtZXJfYXJnc1siYmxvY2tfcG9ydCJdID0gc3RyKGJvb3N0Ojpmb3JtYXQoIiVkIikgJSBy
ZXBsYXlfY2hhbik7CiAgICBzdHJlYW1fYXJncy5hcmdzICAgICAgICAgICAgPSBzdHJlYW1lcl9h
cmdzOwogICAgdHhfc3RyZWFtICAgICAgICAgICAgICAgICAgID0gdXNycC0+Z2V0X3R4X3N0cmVh
bShzdHJlYW1fYXJncyk7CgogICAgLy8gTWFrZSBzdXJlIHRoYXQgc3RyZWFtZXIgU1BQIGlzIGEg
bXVsdGlwbGUgb2YgdGhlIFJlcGxheSBibG9jayB3b3JkIHNpemUKICAgIHNpemVfdCB0eF9zcHAg
PSB0eF9zdHJlYW0tPmdldF9tYXhfbnVtX3NhbXBzKCk7CiAgICBpZiAodHhfc3BwICUgc2FtcGxl
c19wZXJfd29yZCAhPSAwKSB7CiAgICAgICAgLy8gUm91bmQgU1BQIGRvd24gdG8gYSBtdWx0aXBs
ZSBvZiB0aGUgd29yZCBzaXplCiAgICAgICAgdHhfc3BwID0gKHR4X3NwcCAvIHNhbXBsZXNfcGVy
X3dvcmQpICogc2FtcGxlc19wZXJfd29yZDsKICAgICAgICB0eF9zdHJlYW0ucmVzZXQoKTsKICAg
ICAgICBzdHJlYW1lcl9hcmdzWyJzcHAiXSA9IGJvb3N0OjpsZXhpY2FsX2Nhc3Q8c3RkOjpzdHJp
bmc+KHR4X3NwcCk7CiAgICAgICAgc3RyZWFtX2FyZ3MuYXJncyAgICAgPSBzdHJlYW1lcl9hcmdz
OwogICAgICAgIHR4X3N0cmVhbSAgICAgICAgICAgID0gdXNycC0+Z2V0X3R4X3N0cmVhbShzdHJl
YW1fYXJncyk7CiAgICB9CgogICAgY291dCA8PCAiVXNpbmcgc3RyZWFtZXIgYXJnczogIiA8PCBz
dHJlYW1fYXJncy5hcmdzLnRvX3N0cmluZygpIDw8IGVuZGw7CgoKICAgIC8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLwogICAgLy8gUmVhZCB0aGUgZGF0YSB0byByZXBsYXkKCiAgICAvLyBPcGVuIHRoZSBmaWxl
CiAgICBzdGQ6Omlmc3RyZWFtIGluZmlsZShmaWxlLmNfc3RyKCksIHN0ZDo6aWZzdHJlYW06OmJp
bmFyeSk7CiAgICBpZiAoIWluZmlsZS5pc19vcGVuKCkpIHsKICAgICAgICBzdGQ6OmNlcnIgPDwg
IkNvdWxkIG5vdCBvcGVuIHNwZWNpZmllZCBmaWxlIiA8PCBzdGQ6OmVuZGw7CiAgICAgICAgcmV0
dXJuIEVYSVRfRkFJTFVSRTsKICAgIH0KCiAgICAvLyBHZXQgdGhlIGZpbGUgc2l6ZQogICAgaW5m
aWxlLnNlZWtnKDAsIHN0ZDo6aW9zOjplbmQpOwogICAgc2l6ZV90IGZpbGVfc2l6ZSA9IGluZmls
ZS50ZWxsZygpOwogICAgaW5maWxlLnNlZWtnKDAsIHN0ZDo6aW9zOjpiZWcpOwoKICAgIC8vIENh
bGN1bGF0ZSB0aGUgbnVtYmVyIG9mIDY0LWJpdCB3b3JkcyBhbmQgc2FtcGxlcyB0byByZXBsYXkK
ICAgIHNpemVfdCB3b3Jkc190b19yZXBsYXkgICA9IGZpbGVfc2l6ZSAvIHJlcGxheV93b3JkX3Np
emU7CiAgICBzaXplX3Qgc2FtcGxlc190b19yZXBsYXkgPSB3b3Jkc190b19yZXBsYXkgKiByZXBs
YXlfd29yZF9zaXplIC8gYnl0ZXNfcGVyX3NhbXBsZTsKCiAgICAvLyBDcmVhdGUgYnVmZmVyCiAg
ICBzdGQ6OnZlY3RvcjxjaGFyPiB0eF9idWZmZXIod29yZHNfdG9fcmVwbGF5ICogcmVwbGF5X3dv
cmRfc2l6ZSk7CiAgICBjaGFyKiB0eF9idWZfcHRyID0gJnR4X2J1ZmZlclswXTsKCiAgICAvLyBS
ZWFkIGZpbGUgaW50byBidWZmZXIsIHJvdW5kZWQgZG93biB0byBudW1iZXIgb2Ygd29yZHMKICAg
IGluZmlsZS5yZWFkKHR4X2J1Zl9wdHIsIHdvcmRzX3RvX3JlcGxheSAqIHJlcGxheV93b3JkX3Np
emUpOwogICAgaW5maWxlLmNsb3NlKCk7CgoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8g
Q29uZmlndXJlIHJlcGxheSBibG9jawoKICAgIC8vIENvbmZpZ3VyZSBhIGJ1ZmZlciBpbiB0aGUg
b24tYm9hcmQgbWVtb3J5IGF0IGFkZHJlc3MgMCB0aGF0J3MgZXF1YWwgaW4KICAgIC8vIHNpemUg
dG8gdGhlIGZpbGUgd2Ugd2FudCB0byBwbGF5IGJhY2sgKHJvdW5kZWQgZG93biB0byBhIG11bHRp
cGxlIG9mCiAgICAvLyA2NC1iaXQgd29yZHMpLiBOb3RlIHRoYXQgaXQgaXMgYWxsb3dlZCB0byBw
bGF5YmFjayBhIGRpZmZlcmVudCBzaXplIG9yCiAgICAvLyBsb2NhdGlvbiBmcm9tIHdoYXQgd2Fz
IHJlY29yZGVkLgogICAgcmVwbGF5X2N0cmwtPmNvbmZpZ19yZWNvcmQoMCwgd29yZHNfdG9fcmVw
bGF5ICogcmVwbGF5X3dvcmRfc2l6ZSwgcmVwbGF5X2NoYW4pOwogICAgcmVwbGF5X2N0cmwtPmNv
bmZpZ19wbGF5KDAsIHdvcmRzX3RvX3JlcGxheSAqIHJlcGxheV93b3JkX3NpemUsIHJlcGxheV9j
aGFuKTsKCiAgICAvLyBTZXQgc2FtcGxlcyBwZXIgcGFja2V0IGZvciBSZXBsYXkgYmxvY2sgcGxh
eWJhY2sKICAgIHJlcGxheV9jdHJsLT5zZXRfd29yZHNfcGVyX3BhY2tldChyZXBsYXlfc3BwIC8g
c2FtcGxlc19wZXJfd29yZCwgcmVwbGF5X2NoYW4pOwoKICAgIC8vIERpc3BsYXkgcmVwbGF5IGNv
bmZpZ3VyYXRpb24KICAgIGNvdXQgPDwgYm9vc3Q6OmZvcm1hdCgiUmVwbGF5IGZpbGUgc2l6ZTog
ICAgICVkIGJ5dGVzICglZCBxd29yZHMsICVkIHNhbXBsZXMpIikKICAgICAgICAgICAgICAgICUg
KHdvcmRzX3RvX3JlcGxheSAqIHJlcGxheV93b3JkX3NpemUpICUgd29yZHNfdG9fcmVwbGF5CiAg
ICAgICAgICAgICAgICAlIHNhbXBsZXNfdG9fcmVwbGF5CiAgICAgICAgIDw8IGVuZGw7CgogICAg
Y291dCA8PCBib29zdDo6Zm9ybWF0KCJSZWNvcmQgYmFzZSBhZGRyZXNzOiAgMHglWCIpCiAgICAg
ICAgICAgICAgICAlIHJlcGxheV9jdHJsLT5nZXRfcmVjb3JkX2FkZHIocmVwbGF5X2NoYW4pCiAg
ICAgICAgIDw8IGVuZGw7CiAgICBjb3V0IDw8IGJvb3N0Ojpmb3JtYXQoIlJlY29yZCBidWZmZXIg
c2l6ZTogICAlZCBieXRlcyIpCiAgICAgICAgICAgICAgICAlIHJlcGxheV9jdHJsLT5nZXRfcmVj
b3JkX3NpemUocmVwbGF5X2NoYW4pCiAgICAgICAgIDw8IGVuZGw7CiAgICBjb3V0IDw8IGJvb3N0
Ojpmb3JtYXQoIlJlY29yZCBmdWxsbmVzczogICAgICAlZCIpCiAgICAgICAgICAgICAgICAlIHJl
cGxheV9jdHJsLT5nZXRfcmVjb3JkX2Z1bGxuZXNzKHJlcGxheV9jaGFuKQogICAgICAgICA8PCBl
bmRsOwogICAgY291dCA8PCBib29zdDo6Zm9ybWF0KCJQbGF5IGJhc2UgYWRkcmVzczogICAgMHgl
WCIpCiAgICAgICAgICAgICAgICAlIHJlcGxheV9jdHJsLT5nZXRfcGxheV9hZGRyKHJlcGxheV9j
aGFuKQogICAgICAgICA8PCBlbmRsOwogICAgY291dCA8PCBib29zdDo6Zm9ybWF0KCJQbGF5IGJ1
ZmZlciBzaXplOiAgICAgJWQgYnl0ZXMiKQogICAgICAgICAgICAgICAgJSByZXBsYXlfY3RybC0+
Z2V0X3BsYXlfc2l6ZShyZXBsYXlfY2hhbikKICAgICAgICAgPDwgZW5kbDsKCiAgICAvLyBSZXN0
YXJ0IHJlY29yZCBidWZmZXIgcmVwZWF0ZWRseSB1bnRpbCBubyBuZXcgZGF0YSBhcHBlYXJzIG9u
IHRoZSBSZXBsYXkKICAgIC8vIGJsb2NrJ3MgaW5wdXQuIFRoaXMgd2lsbCBmbHVzaCBhbnkgZGF0
YSB0aGF0IHdhcyBidWZmZXJlZCBvbiB0aGUgaW5wdXQuCiAgICB1aW50MzJfdCBmdWxsbmVzczsK
ICAgIGNvdXQgPDwgYm9vc3Q6OmZvcm1hdCgiUmVzdGFydGluZyByZWNvcmQgYnVmZmVyLi4uIikg
PDwgZW5kbDsKICAgIGRvIHsKICAgICAgICBzdGQ6OmNocm9ubzo6c3lzdGVtX2Nsb2NrOjp0aW1l
X3BvaW50IHN0YXJ0X3RpbWU7CiAgICAgICAgc3RkOjpjaHJvbm86OnN5c3RlbV9jbG9jazo6ZHVy
YXRpb24gdGltZV9kaWZmOwoKICAgICAgICByZXBsYXlfY3RybC0+cmVjb3JkX3Jlc3RhcnQocmVw
bGF5X2NoYW4pOwoKICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHJlY29yZCBidWZmZXIgZG9lc24n
dCBzdGFydCB0byBmaWxsIGFnYWluCiAgICAgICAgc3RhcnRfdGltZSA9IHN0ZDo6Y2hyb25vOjpz
eXN0ZW1fY2xvY2s6Om5vdygpOwogICAgICAgIGRvIHsKICAgICAgICAgICAgZnVsbG5lc3MgPSBy
ZXBsYXlfY3RybC0+Z2V0X3JlY29yZF9mdWxsbmVzcyhyZXBsYXlfY2hhbik7CiAgICAgICAgICAg
IGlmIChmdWxsbmVzcyAhPSAwKQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIHRp
bWVfZGlmZiA9IHN0ZDo6Y2hyb25vOjpzeXN0ZW1fY2xvY2s6Om5vdygpIC0gc3RhcnRfdGltZTsK
ICAgICAgICAgICAgdGltZV9kaWZmID0gc3RkOjpjaHJvbm86OmR1cmF0aW9uX2Nhc3Q8c3RkOjpj
aHJvbm86Om1pbGxpc2Vjb25kcz4odGltZV9kaWZmKTsKICAgICAgICB9IHdoaWxlICh0aW1lX2Rp
ZmYuY291bnQoKSA8IDI1MCk7CiAgICB9IHdoaWxlIChmdWxsbmVzcyk7CgoKICAgIC8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLwogICAgLy8gU2VuZCBkYXRhIHRvIHJlcGxheSAocmVjb3JkIHRoZSBkYXRhKQoK
ICAgIGNvdXQgPDwgIlNlbmRpbmcgZGF0YSB0byBiZSByZWNvcmRlZC4uLiIgPDwgZW5kbDsKICAg
IHR4X21kLnN0YXJ0X29mX2J1cnN0ID0gdHJ1ZTsKICAgIHR4X21kLmVuZF9vZl9idXJzdCAgID0g
dHJ1ZTsKICAgIHNpemVfdCBudW1fdHhfc2FtcHMgID0gdHhfc3RyZWFtLT5zZW5kKHR4X2J1Zl9w
dHIsIHNhbXBsZXNfdG9fcmVwbGF5LCB0eF9tZCk7CgogICAgaWYgKG51bV90eF9zYW1wcyAhPSBz
YW1wbGVzX3RvX3JlcGxheSkgewogICAgICAgIGNvdXQgPDwgYm9vc3Q6OmZvcm1hdCgiRVJST1I6
IFVuYWJsZSB0byBzZW5kICVkIHNhbXBsZXMiKSAlIHNhbXBsZXNfdG9fcmVwbGF5CiAgICAgICAg
ICAgICA8PCBlbmRsOwogICAgICAgIHJldHVybiBFWElUX0ZBSUxVUkU7CiAgICB9CgoKICAgIC8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLwogICAgLy8gV2FpdCBmb3IgZGF0YSB0byBiZSBzdG9yZWQgaW4gb24t
Ym9hcmQgbWVtb3J5CgogICAgY291dCA8PCAiV2FpdGluZyBmb3IgcmVjb3JkaW5nIHRvIGNvbXBs
ZXRlLi4uIiA8PCBlbmRsOwogICAgd2hpbGUgKHJlcGxheV9jdHJsLT5nZXRfcmVjb3JkX2Z1bGxu
ZXNzKHJlcGxheV9jaGFuKQogICAgICAgICAgIDwgd29yZHNfdG9fcmVwbGF5ICogcmVwbGF5X3dv
cmRfc2l6ZSkKICAgICAgICA7CgoKd2hpbGUgKHRydWUpIHsKCXN0b3Bfc2lnbmFsX2NhbGxlZCA9
IGZhbHNlOwoJCglzdGQ6OmNvdXQgPDwgImhpdCA8ZW50ZXI+IHRvIHN0YXJ0IHN0cmVhbWluZywg
dHlwZSAnZXhpdCcgdG8gcXVpdCIgPDwgc3RkOjplbmRsOwoJc3RkOjpzdHJpbmcgdXNlcl9jbWQg
PSAiIjsKCXN0ZDo6Z2V0bGluZShzdGQ6OmNpbix1c2VyX2NtZCk7CglpZiAodXNlcl9jbWQ9PSJl
eGl0IikgYnJlYWs7CgkKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gU3RhcnQgcmVwbGF5
IG9mIGRhdGEKCiAgICB1aGQ6OnN0cmVhbV9jbWRfdCBzdHJlYW1fY21kKHVoZDo6c3RyZWFtX2Nt
ZF90OjpTVFJFQU1fTU9ERV9TVEFSVF9DT05USU5VT1VTKTsKCiAgICBpZiAobnNhbXBzID09IDAp
IHsKICAgICAgICAvLyBSZXBsYXkgdGhlIGVudGlyZSBidWZmZXIgb3ZlciBhbmQgb3ZlcgogICAg
ICAgIHN0cmVhbV9jbWQuc3RyZWFtX21vZGUgPSB1aGQ6OnN0cmVhbV9jbWRfdDo6U1RSRUFNX01P
REVfU1RBUlRfQ09OVElOVU9VUzsKICAgICAgICBzdHJlYW1fY21kLm51bV9zYW1wcyAgID0gd29y
ZHNfdG9fcmVwbGF5ICogc2FtcGxlc19wZXJfd29yZDsKICAgICAgICBjb3V0IDw8IGJvb3N0Ojpm
b3JtYXQoIlN0YXJ0IHJlcGxheSBvZiAlZCBzYW1wbGVzIGluIGNvbnRpbnVvdXMgbW9kZSwgIgog
ICAgICAgICAgICAgICAgICAgICIlZiBzZWNvbmRzIGluIHRoZSBmdXR1cmUuLi4iKQogICAgICAg
ICAgICAgICAgICAgICUgc3RyZWFtX2NtZC5udW1fc2FtcHMgJSBzZWNvbmRzX2luX2Z1dHVyZQog
ICAgICAgICAgICAgPDwgZW5kbDsKICAgIH0gZWxzZSB7CiAgICAgICAgLy8gUmVwbGF5IG5zYW1w
cywgd3JhcHBpbmcgYmFjayB0byB0aGUgc3RhcnQgb2YgdGhlIGJ1ZmZlciBpZiBuc2FtcHMgaXMK
ICAgICAgICAvLyBsYXJnZXIgdGhhbiB0aGUgYnVmZmVyIHNpemUuCiAgICAgICAgc3RyZWFtX2Nt
ZC5zdHJlYW1fbW9kZSA9IHVoZDo6c3RyZWFtX2NtZF90OjpTVFJFQU1fTU9ERV9OVU1fU0FNUFNf
QU5EX0RPTkU7CiAgICAgICAgc3RyZWFtX2NtZC5udW1fc2FtcHMgICA9IG5zYW1wczsKICAgICAg
ICBjb3V0IDw8IGJvb3N0Ojpmb3JtYXQoIlN0YXJ0IHJlcGxheSBvZiAlZCBzYW1wbGVzLCAiCiAg
ICAgICAgICAgICAgICAgICAgIiVmIHNlY29uZHMgaW4gdGhlIGZ1dHVyZS4uLiIpCiAgICAgICAg
ICAgICAgICAgICAgJSBzdHJlYW1fY21kLm51bV9zYW1wcyAlIHNlY29uZHNfaW5fZnV0dXJlCiAg
ICAgICAgICAgICA8PCBlbmRsOwogICAgfQogICAgaWYgKHNlY29uZHNfaW5fZnV0dXJlID09IDAu
MCkgewogICAgICAgIHN0cmVhbV9jbWQuc3RyZWFtX25vdyA9IHRydWU7CiAgICB9CiAgICBlbHNl
IHsKICAgICAgICBzdHJlYW1fY21kLnN0cmVhbV9ub3cgPSBmYWxzZTsKICAgICAgICBzdHJlYW1f
Y21kLnRpbWVfc3BlYyAgPSByYWRpb19jdHJsLT5nZXRfdGltZV9ub3coKSArCiAgICAgICAgICAg
IHVoZDo6dGltZV9zcGVjX3Qoc2Vjb25kc19pbl9mdXR1cmUpOwogICAgfQogICAgcmVwbGF5X2N0
cmwtPmlzc3VlX3N0cmVhbV9jbWQoc3RyZWFtX2NtZCwgcmVwbGF5X2NoYW4pOwoKCiAgICAvLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8KICAgIC8vIFdhaXQgdW50aWwgc2FtcGxlcyBzZW50IG9yIHVzZXIgc2F5
cyB0byBzdG9wCgogICAgLy8gU2V0dXAgU0lHSU5UIGhhbmRsZXIgKEN0cmwrQykKICAgIHN0ZDo6
c2lnbmFsKFNJR0lOVCwgJnNpZ19pbnRfaGFuZGxlcik7CiAgICBjb3V0IDw8ICJSZXBsYXlpbmcg
ZGF0YSAoUHJlc3MgQ3RybCtDIHRvIHN0b3ApLi4uIiA8PCBzdGQ6OmVuZGw7CgogICAgYm9vbCBn
b3RfYXN5bmNfYnVyc3RfYWNrID0gZmFsc2U7CiAgICBpZiAobnNhbXBzID09IDApIHsKICAgICAg
ICAvLyBUcmFuc21pdCB1bnRpbCB0aGUgdXNlciBwcmVzc2VzIEN0cmwrQwogICAgICAgIHdoaWxl
IChub3Qgc3RvcF9zaWduYWxfY2FsbGVkKSB7CiAgICAgICAgICAgIHN0ZDo6dGhpc190aHJlYWQ6
OnNsZWVwX2ZvcihzdGQ6OmNocm9ubzo6bWlsbGlzZWNvbmRzKDEwMCkpOwogICAgICAgIH0KICAg
IH0KICAgIGVsc2UgewogICAgICAgIGNvbnN0IGRvdWJsZSB0aW1lb3V0ID0gc2Vjb25kc19pbl9m
dXR1cmUgKyBuc2FtcHMgLyByYWRpb19jdHJsLT5nZXRfcmF0ZSgpICsgMC41OwogICAgICAgIHVo
ZDo6YXN5bmNfbWV0YWRhdGFfdCBhc3luY19tZDsKCiAgICAgICAgLy8gV2FpdCB1bnRpbCB3ZSBn
ZXQgdGhlIGVuZC1vZi1idXJzdCBhY2tub3dsZWRnbWVudAogICAgICAgIHdoaWxlIChub3Qgc3Rv
cF9zaWduYWxfY2FsbGVkIGFuZCBub3QgZ290X2FzeW5jX2J1cnN0X2FjawogICAgICAgICAgICAg
ICBhbmQgdHhfc3RyZWFtLT5yZWN2X2FzeW5jX21zZyhhc3luY19tZCwgdGltZW91dCkpIHsKICAg
ICAgICAgICAgZ290X2FzeW5jX2J1cnN0X2FjayA9CiAgICAgICAgICAgICAgICAoYXN5bmNfbWQu
ZXZlbnRfY29kZSA9PSB1aGQ6OmFzeW5jX21ldGFkYXRhX3Q6OkVWRU5UX0NPREVfQlVSU1RfQUNL
KTsKICAgICAgICB9CiAgICAgICAgc3RkOjpjb3V0IDw8IChnb3RfYXN5bmNfYnVyc3RfYWNrID8g
IkRvbmUiIDogIlRpbWVvdXQiKSA8PCBzdGQ6OmVuZGw7CgogICAgICAgIHJldHVybiBFWElUX1NV
Q0NFU1M7CiAgICB9CgogICAgLy8gUmVtb3ZlIFNJR0lOVCBoYW5kbGVyCiAgICBzdGQ6OnNpZ25h
bChTSUdJTlQsIFNJR19ERkwpOwoKCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIElzc3Vl
IHN0b3AgY29tbWFuZAoKICAgIHN0cmVhbV9jbWQuc3RyZWFtX21vZGUgPSB1aGQ6OnN0cmVhbV9j
bWRfdDo6U1RSRUFNX01PREVfU1RPUF9DT05USU5VT1VTOwogICAgY291dCA8PCBlbmRsIDw8ICJT
dG9wcGluZyByZXBsYXkuLi4iIDw8IGVuZGw7CiAgICByZXBsYXlfY3RybC0+aXNzdWVfc3RyZWFt
X2NtZChzdHJlYW1fY21kLCByZXBsYXlfY2hhbik7CgogICAgLy8gVGhlIHN0b3AgdGFrZXMgZWZm
ZWN0IGFmdGVyIHRoZSBjdXJyZW50IGNvbW1hbmQgaGFzIGNvbXBsZXRlZCwgc28gdXNlCiAgICAv
LyBoYWx0IHRvIHN0b3AgdGhlIGNvbW1hbmQgaW4gcHJvZ3Jlc3MgYW5kIGNsZWFyIGFueSBxdWV1
ZWQgY29tbWFuZHMuCiAgICByZXBsYXlfY3RybC0+cGxheV9oYWx0KHJlcGxheV9jaGFuKTsKCgog
ICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBXYWl0IGZvciBhbnkgYnVmZmVyZWQgcmVwbGF5
IGRhdGEgdG8gZmluaXNoIHBsYXlpbmcgb3V0CgogICAgdWludDE2X3QgcHJldl9wYWNrZXRfY291
bnQsIHBhY2tldF9jb3VudDsKCiAgICBjb3V0IDw8ICJXYWl0aW5nIGZvciByZXBsYXkgZGF0YSB0
byBmbHVzaC4uLiAiIDw8IHN0ZDo6Zmx1c2g7CiAgICBwcmV2X3BhY2tldF9jb3VudCA9CiAgICAg
ICAgcmVwbGF5X2N0cmwtPnNyX3JlYWQ2NCh1aGQ6OnJmbm9jOjpTUl9SRUFEQkFDS19SRUdfR0xP
QkFMX1BBUkFNUywgcmVwbGF5X2NoYW4pCiAgICAgICAgPj4gMzI7CiAgICB3aGlsZSAodHJ1ZSkg
ewogICAgICAgIHN0ZDo6dGhpc190aHJlYWQ6OnNsZWVwX2ZvcihzdGQ6OmNocm9ubzo6bWlsbGlz
ZWNvbmRzKDEwMCkpOwogICAgICAgIHBhY2tldF9jb3VudCA9CiAgICAgICAgICAgIHJlcGxheV9j
dHJsLT5zcl9yZWFkNjQodWhkOjpyZm5vYzo6U1JfUkVBREJBQ0tfUkVHX0dMT0JBTF9QQVJBTVMs
IHJlcGxheV9jaGFuKQogICAgICAgICAgICA+PiAzMjsKICAgICAgICBpZiAocGFja2V0X2NvdW50
ID09IHByZXZfcGFja2V0X2NvdW50KQogICAgICAgICAgICBicmVhazsKICAgICAgICBwcmV2X3Bh
Y2tldF9jb3VudCA9IHBhY2tldF9jb3VudDsKICAgIH0KCn0KICAgIGNvdXQgPDwgZW5kbCA8PCAi
RG9uZSIgPDwgZW5kbDsKCiAgICByZXR1cm4gRVhJVF9TVUNDRVNTOwp9Cg==
--000000000000069de705a3f985a0
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
USRP-users mailing list
USRP-users@lists.ettus.com
http://lists.ettus.com/mailman/listinfo/usrp-users_lists.ettus.com

--000000000000069de705a3f985a0--

